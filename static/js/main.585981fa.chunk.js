(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{466:function(e,t,a){},488:function(e,t,a){e.exports=a(974)},717:function(e,t,a){},738:function(e,t,a){},963:function(e,t,a){},966:function(e,t,a){},967:function(e,t,a){},968:function(e,t,a){},969:function(e,t,a){},970:function(e,t,a){},974:function(e,t,a){"use strict";a.r(t);a(297),a(309),a(310),a(311),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(489),a(490),a(491),a(492),a(493),a(494),a(495),a(496),a(497),a(326),a(498),a(499),a(178),a(500),a(501),a(502),a(503),a(504),a(505),a(506),a(507),a(508),a(509),a(510),a(511),a(512),a(513),a(514),a(516),a(518),a(519),a(335),a(180),a(520),a(521),a(522),a(523),a(524),a(525),a(526),a(527),a(528),a(529),a(530),a(531),a(532),a(533),a(534),a(535),a(340),a(536),a(537),a(538),a(539),a(540),a(541),a(542),a(543),a(544),a(546),a(547),a(549),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(561),a(562),a(563),a(564),a(565),a(566),a(567),a(247),a(569),a(570),a(571),a(572),a(573),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(352),a(586),a(587),a(249),a(588),a(589),a(590),a(591),a(188),a(592),a(593),a(594),a(595),a(596),a(597),a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(617),a(619),a(620),a(621),a(622),a(623),a(624),a(625),a(626),a(627),a(628),a(629),a(630),a(631),a(632),a(633),a(634),a(635),a(636),a(637),a(638),a(639),a(640),a(641),a(642),a(643),a(644),a(645),a(646),a(647),a(648),a(649),a(650),a(651),a(254),a(652),a(653),a(654),a(655),a(656),a(657),a(658),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(661),a(662),a(663),a(664),a(665),a(666),a(667),a(668),a(669),a(670),a(671),a(672),a(673),a(674),a(675),a(676),a(678),a(679),a(680),a(681),a(682),a(683),a(684),a(685),a(686),a(687),a(688),a(378),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(689),a(690),a(691),a(693),a(397),a(398),a(399),a(694),a(695),a(696),a(697),a(698),a(699),a(700),a(701),a(401),a(702),a(703),a(704),a(706),a(403),a(707),a(404);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),l=(a(717),a(102)),o=a(170),s=a.n(o),m=a(288),u=a(12),d=a.n(u),p="http://localhost:5000/users",f="http://localhost:5000";function v(){return(v=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(p,"/login"),t,{withCredentials:!0}).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"login_user",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return b.apply(this,arguments)}function b(){return(b=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(p,"/auth"),{},{withCredentials:!0}).then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",{type:"auth_user",payload:t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=a(45),g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function c(c){var i=Object(h.c)((function(e){return e.user})),l=Object(h.b)();return Object(n.useEffect)((function(){l(E()).then((function(e){e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&c.history.push("/"):t&&c.history.push("/login")}))}),[]),r.a.createElement(e,Object.assign({},c,{user:i}))}return c},_=a(9),w=(a(738),a(975)),y=a(976),N=a(90),O=a.n(N);var j=function(){var e=Object(n.useState)([]),t=Object(_.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){d.a.get("".concat(f,"/video/getVideos")).then((function(e){if(e.data.success){var t=e.data.videos;c(t)}}))}),[]);var i=a.length>0&&a.map((function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement(w.a,{lg:6,md:8,xs:24,key:t},r.a.createElement("div",{className:"landing_video_thumbnail"},r.a.createElement("a",{href:"/video/".concat(e._id)},r.a.createElement("img",{src:"".concat(f,"/").concat(e.thumbnail)}),r.a.createElement("span",{className:"landing_video_duration"},"".concat(a,":").concat(n)))),r.a.createElement("div",{className:"landing_video_info_container"},r.a.createElement("div",{className:"landing_video_writer_thumbnail"},r.a.createElement("img",{src:e.writer&&"".concat(e.writer.image)})),r.a.createElement("div",{className:"landing_video_info"},r.a.createElement("span",null,e.title),r.a.createElement("span",null,e.description),r.a.createElement("div",null,r.a.createElement("span",null,0!==e.views&&e.view>1?"".concat(e.views," views"):"".concat(e.views," view")),r.a.createElement("span",null," - ",O()(e.createdAt).format("MMM Do YY"))))))}));return r.a.createElement("div",{className:"landingPage_container"},r.a.createElement("h2",{className:"landingPage_title"},"Videos"),r.a.createElement(y.a,{gutter:[16,16]},i))},S=a(225),I=a(64),k=a(977),C=a(978),x=a(982),D=a(25),L=a(980),P=a(294),F=k.a.Title;var T=Object(l.f)((function(e){var t=Object(h.b)(),a=!!localStorage.getItem("rememberMe"),c=Object(n.useState)(""),i=Object(_.a)(c,2),l=i[0],o=i[1],s=Object(n.useState)(a),m=Object(_.a)(s,2),u=m[0],d=m[1],p=function(){d(!u)},f=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return r.a.createElement(S.a,{initialValues:{email:f,password:""},validationSchema:I.object().shape({email:I.string().email("Email is invalid").required("Email is required"),password:I.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return v.apply(this,arguments)}(n)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===u?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):o("Check out your Account or Password again")})).catch((function(e){o("Check out your Account or Password again"),setTimeout((function(){o("")}),3e3)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,c=(e.dirty,e.isSubmitting),i=e.handleChange,o=e.handleBlur,s=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement(F,{level:2},"Log In"),r.a.createElement("form",{onSubmit:s,style:{width:"350px"}},r.a.createElement(C.a.Item,{required:!0},r.a.createElement(x.a,{id:"email",prefix:r.a.createElement(D.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:i,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(C.a.Item,{required:!0},r.a.createElement(x.a,{id:"password",prefix:r.a.createElement(D.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:i,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),l&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},l)),r.a.createElement(C.a.Item,null,r.a.createElement(L.a,{id:"rememberMe",onChange:p,checked:u},"Remember me"),r.a.createElement("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"}},"forgot password"),r.a.createElement("div",null,r.a.createElement(P.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:c,onSubmit:s},"Log in")),"Or ",r.a.createElement("a",{href:"/register"},"register now!"))))}))})),q={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},V={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var M=function(e){var t=Object(h.b)();return r.a.createElement(S.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:I.object().shape({name:I.string().required("Name is required"),lastName:I.string().required("Last Name is required"),email:I.string().email("Email is invalid").required("Email is required"),password:I.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:I.string().oneOf([I.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,name:a.name,lastname:a.lastname,image:"http://gravatar.com/avatar/".concat(O()().unix(),"?d=identicon")};t(function(e){return{type:"register_user",payload:d.a.post("".concat(p,"/register"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,c=(e.dirty,e.isSubmitting),i=e.handleChange,l=e.handleBlur,o=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Sign up"),r.a.createElement(C.a,Object.assign({style:{minWidth:"375px"}},q,{onSubmit:o}),r.a.createElement(C.a.Item,{required:!0,label:"Name"},r.a.createElement(x.a,{id:"name",placeholder:"Enter your name",type:"text",value:t.name,onChange:i,onBlur:l,className:n.name&&a.name?"text-input error":"text-input"}),n.name&&a.name&&r.a.createElement("div",{className:"input-feedback"},n.name)),r.a.createElement(C.a.Item,{required:!0,label:"Last Name"},r.a.createElement(x.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:t.lastName,onChange:i,onBlur:l,className:n.lastName&&a.lastName?"text-input error":"text-input"}),n.lastName&&a.lastName&&r.a.createElement("div",{className:"input-feedback"},n.lastName)),r.a.createElement(C.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(x.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:i,onBlur:l,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(C.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(x.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:i,onBlur:l,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(C.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(x.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:i,onBlur:l,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(C.a.Item,V,r.a.createElement(P.a,{onClick:o,type:"primary",disabled:c},"Submit"))))}))},z=a(979);z.a.SubMenu,z.a.ItemGroup;var A=function(e){return r.a.createElement(z.a,{mode:e.mode},r.a.createElement(z.a.Item,{key:"mail"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement(z.a.Item,{key:"subscribe"},r.a.createElement("a",{href:"/subscribe"},"Subscribe")))};var B=Object(l.f)((function(e){var t=Object(h.c)((function(e){return e.user}));return t.userData&&!t.userData.isAuth?r.a.createElement(z.a,{mode:e.mode},r.a.createElement(z.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login"},"Signin")),r.a.createElement(z.a.Item,{key:"app"},r.a.createElement("a",{href:"/register"},"Signup"))):r.a.createElement(z.a,{mode:e.mode},r.a.createElement(z.a.Item,{key:"create"},r.a.createElement("a",{href:"/video/upload"},"Upload")),r.a.createElement(z.a.Item,{key:"logout"},r.a.createElement("a",{onClick:function(){d.a.post("".concat(p,"/logout"),{},{withCredentials:!0}).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},"Logout")))})),R=a(981);a(963);var U=function(){var e=Object(n.useState)(!1),t=Object(_.a)(e,2),a=t[0],c=t[1];return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},r.a.createElement("a",{href:"/"},"Seoul")),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(A,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_rigth"},r.a.createElement(B,{mode:"horizontal"})),r.a.createElement(P.a,{className:"menu__mobile-button",type:"primary",onClick:function(){c(!0)}},r.a.createElement(D.a,{type:"align-right"})),r.a.createElement(R.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){c(!1)},visible:a},r.a.createElement(A,{mode:"inline"}),r.a.createElement(B,{mode:"inline"}))))};var H=function(){return r.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},r.a.createElement("p",null," Happy Coding  ",r.a.createElement(D.a,{type:"smile"})))},W=a(483),X=(a(966),a(983)),Y=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),c=(a[0],a[1]),i=Object(n.useState)(0),l=Object(_.a)(i,2),o=(l[0],l[1],Object(n.useState)("")),s=Object(_.a)(o,2),m=s[0],u=s[1],p=Object(n.useCallback)((function(t){var a=new FormData;a.append("videoFile",t[0]);d.a.post("".concat(f,"/video/uploadFile"),a,{header:{"content-type":"multipart/form-data"}}).then((function(t){if(t.data.success){var a=t.data,n=a.filePath,r=a.fileName,i={filePath:n,fileName:r};c(n),d.a.post("".concat(f,"/video/thumbnail"),i).then((function(t){if(t.data.success){var a=t.data,r=a.thumbnailPath,c=a.fileDuration;u(r),e.updateState({filePath:n,thumbnailPath:r,fileDuration:c})}}))}}))}),[]),v=Object(W.a)({onDrop:p}),E=v.getRootProps,b=v.getInputProps;return r.a.createElement(n.Fragment,null,r.a.createElement("div",Object.assign({className:"dropzone"},E()),r.a.createElement("input",b()),r.a.createElement(X.a,{style:{fontSize:"3rem"}})),r.a.createElement("div",{className:"dropzone_thumbnail"},m&&r.a.createElement("img",{src:"".concat(f,"/").concat(m),alt:"image"})))};a(967);var J=function(e){var t=Object(h.c)((function(e){return e.user})).userData,a=Object(n.useState)(""),c=Object(_.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(""),s=Object(_.a)(o,2),m=s[0],u=s[1],p=Object(n.useState)(0),v=Object(_.a)(p,2),E=v[0],b=v[1],g=Object(n.useState)(""),w=Object(_.a)(g,2),y=w[0],N=w[1],O=Object(n.useState)(0),j=Object(_.a)(O,2),S=j[0],I=j[1],k=Object(n.useState)(""),C=Object(_.a)(k,2),x=C[0],D=C[1],L=[{index:0,value:"Flim & Animation"},{index:1,value:"Sports"},{index:2,value:"Documentary & History"},{index:3,value:"Art & Music"},{index:4,value:"Living"},{index:5,value:"Comedy & Funny"}].map((function(e,t){return r.a.createElement("option",{key:t,value:e.index},e.value)})),P=function(e){var t=e.target.name,a=e.target.value;switch(t){case"title":l(a);break;case"description":u(a)}};return r.a.createElement("div",null,r.a.createElement("div",{className:"upload_container"},r.a.createElement("h2",{className:"upload_title"},"Video Upload"),r.a.createElement("form",{className:"upload_container_form",onSubmit:function(a){if(a.preventDefault(),""===i||""===m||""===E||""===y||""===S||""===x)return alert("\ubaa8\ub4e0 \uc815\ubcf4\ub97c \ub2e4 \uc785\ub825\ud574\uc8fc\uc138\uc694.");var n={writer:t._id,title:i,description:m,category:E,filePath:y,thumbnail:x,duration:S};d.a.post("".concat(f,"/video/uploadVideo"),n).then((function(t){t.data.success?(alert("Success! 1\ucd08 \ub4a4 \ud648\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."),setTimeout((function(){e.history.push("/")}),1e3)):alert("Fail at Upload Video")}))}},r.a.createElement("div",{className:"dropzone_container"},r.a.createElement(Y,{updateState:function(e){var t=e.filePath,a=e.thumbnailPath,n=e.fileDuration;N(t),D(a),I(n)}})),r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{name:"title",id:"title",onChange:P,value:i,placeholder:"Write Title"}),r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("textarea",{name:"description",id:"description",onChange:P,value:m,placeholder:"Write Description"}),r.a.createElement("select",{value:E,onChange:function(e){b(e.target.value)}},L),r.a.createElement("button",null,"Upload Video"))))},G=a(133);a(968),a(969);var K=function(e){var t=Object(n.useState)([]),a=Object(_.a)(t,2),c=a[0],i=a[1];Object(n.useEffect)((function(){d.a.get("".concat(f,"/video/getVideos")).then((function(e){e.data.success?i(Object(G.a)(e.data.videos)):alert("\ube44\ub514\uc624 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var l=c&&c.map((function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement("div",{className:"sideVideo_container",key:t},r.a.createElement("div",{className:"sideVideo_thumbnail"},r.a.createElement("a",{href:"/video/".concat(e._id)},r.a.createElement("img",{src:"".concat(f,"/").concat(e.thumbnail)}))),r.a.createElement("div",{className:"sideVideo_info"},r.a.createElement("span",null,e.writer.name),r.a.createElement("span",null,e.views>0&&e.views>1?"".concat(e.views," views"):"".concat(e.views," view")),r.a.createElement("span",null,a,":",n)))}));return r.a.createElement(n.Fragment,null,l)};a(970);var Q=function(e){var t=e.userTo,a=e.userFrom,c=Object(n.useState)(0),i=Object(_.a)(c,2),l=i[0],o=i[1],s=Object(n.useState)(!1),m=Object(_.a)(s,2),u=m[0],p=m[1];return Object(n.useEffect)((function(){var e={userTo:t};d.a.post("".concat(f,"/subscribe/getSubscribeNumber"),e).then((function(e){if(e.data.success){var t=e.data.subscribeNumber;o(t)}else alert("\uad6c\ub3c5\uc790 \uc218\ub97c \ubc1b\uc544\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}));var n={userTo:t,userFrom:a};d.a.post("".concat(f,"/subscribe/subscribed"),n).then((function(e){if(e.data.success){var t=e.data.subscribed;p(t)}else alert("\uad6c\ub3c5 \uc5ec\ubd80 \ud655\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(){var e={userTo:t,userFrom:a};u?d.a.post("".concat(f,"/subscribe/removeFromSubScribe"),e).then((function(e){e.data.success?(o(l-1),p(!u)):alert("\uad6c\ub3c5\ud574\uc9c0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})):d.a.post("".concat(f,"/subscribe/addToSubscribe"),e).then((function(e){e.data.success?(o(l+1),p(!u)):alert("\uad6c\ub3c5\ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},className:"subscribe_btn",style:{backgroundColor:"".concat(u?"gray":"red")}},l,"  ",u?"\uad6c\ub3c5 \ucde8\uc18c":"\uad6c\ub3c5"))},Z=(a(466),a(168)),$=a(984),ee=a(985),te=a(986),ae=a(987);var ne=function(e){var t=Object(n.useState)(0),a=Object(_.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(0),o=Object(_.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)(null),p=Object(_.a)(u,2),v=p[0],E=p[1],b=Object(n.useState)(null),h=Object(_.a)(b,2),g=h[0],w=h[1],y=e.video,N=e.videoId,O=e.userId,j=e.commentId,S={};S=y?{videoId:N}:{commentId:j},Object(n.useEffect)((function(){d.a.post("".concat(f,"/like/getLikeNumber"),S).then((function(e){if(e.data.success){var t=e.data.like;i(t.length),t.map((function(e){e.userId===O&&E("Like")}))}else alert("\uc88b\uc544\uc694 \uc218\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),d.a.post("".concat(f,"/like/getDisLikeNumber"),S).then((function(e){if(e.data.success){var t=e.data.dislike;m(t.length),t.map((function(e){e.userId===O&&w("DisLike")}))}else alert("\uc2eb\uc5b4\uc694 \uc218\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var I=function(){var e={};e=y?{videoId:N,userId:O}:{commentId:j,userId:O},"Like"===v?d.a.post("".concat(f,"/like/unLike"),e).then((function(e){e.data.success&&(i(c-1),E(null))})):d.a.post("".concat(f,"/like/upLike"),e).then((function(e){E("Like"),i(c+1),e.data.success&&"DisLike"===g&&(w(null),m(s-1))}))},k=function(){var e={};e=y?{videoId:N,userId:O}:{commentId:j,userId:O},"DisLike"===g?d.a.post("".concat(f,"/like/unDisLike"),e).then((function(e){e.data.success&&(m(s-1),w(null))})):d.a.post("".concat(f,"/like/upDisLike"),e).then((function(e){e.data.success&&(w("DisLike"),m(s+1),"Like"===v&&(i(c-1),E(null)))}))};return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(Z.a,{title:"Like"},"Like"===v?r.a.createElement($.a,{onClick:I,style:{fontSize:"1.2rem"}}):r.a.createElement(ee.a,{onClick:I,style:{fontSize:"1.2rem"}}),r.a.createElement("span",{style:{cursor:"auto",padding:".5rem"}},c)),r.a.createElement(Z.a,{title:"DisLike"},"DisLike"===g?r.a.createElement(te.a,{onClick:k,style:{fontSize:"1.2rem"}}):r.a.createElement(ae.a,{onClick:k,style:{fontSize:"1.2rem"}}),r.a.createElement("span",{style:{cursor:"auto",padding:".5rem"}},s)))};var re=function(e){var t=e.comment,a=e.videoId,c=e.updateComment,i=Object(h.c)((function(e){return e.user})).userData,l=localStorage.getItem("userId"),o=Object(n.useState)(!1),s=Object(_.a)(o,2),m=s[0],u=s[1],p=Object(n.useState)(""),v=Object(_.a)(p,2),E=v[0],b=v[1],g=function(){u(!m)},w=function(e){e.preventDefault();var n={videoId:a,writer:i._id,content:E,responseTo:t._id};d.a.post("".concat(f,"/comment/saveComment"),n).then((function(e){if(e.data.success){var t=e.data.commentInfo;c(t),b("")}}))},y=function(e){b(e.target.value)},N=function(){var e=t.responseTo,n=localStorage.getItem("userId");d.a.post("".concat(f,"/comment/deleteComment"),{writer:n,responseTo:e,videoId:a}).then((function(e){if(e.data.success){var t=e.data.remainComments;console.log("Alive Comment:",t),t||(t=[]),c(t)}else alert("\ub0b4 \ub313\uae00 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))};return r.a.createElement("div",{className:"singleComment_container"},t.writer&&r.a.createElement("div",{className:"singleComment"},r.a.createElement("div",{className:"comment_writer_container"},r.a.createElement("img",{className:"comment_writer_image",src:t.writer.image}),r.a.createElement("div",{className:"writer_info"},r.a.createElement("span",null,t.writer.name),r.a.createElement("p",null,t.content))),r.a.createElement("div",{className:"userAction_container"},r.a.createElement("p",{onClick:g},"\ub313\uae00 \ub2ec\uae30"),l===t.writer._id&&r.a.createElement("button",{className:"comment_delete_btn",onClick:N},"\ub313\uae00 \uc0ad\uc81c"),l&&r.a.createElement(ne,{commentId:t._id,videoId:a,userId:l}))),m&&i&&function(){if(i._id){i._id;return r.a.createElement("form",{onSubmit:w,className:"root_comment_form"},r.a.createElement("textarea",{className:"root_comment_textarea",value:E,onChange:y,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"}),m&&r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{className:"cancel_btn",onClick:g},"\ucde8\uc18c"),r.a.createElement("button",null,"\ub313\uae00")))}return r.a.createElement("form",{onSubmit:w,className:"root_comment_form"},r.a.createElement("textarea",{className:"root_comment_textarea",value:E,onChange:y,placeholder:"\ub85c\uadf8\uc778 \ud6c4 \ub313\uae00 \ub4f1\ub85d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."}))}())};var ce=function e(t){var a=t.commentList,c=t.parentId,i=t.videoId,l=t.updateComment,o=Object(n.useState)(0),s=Object(_.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),p=Object(_.a)(d,2),f=p[0],v=p[1],E=a&&a.map((function(t,o){return t.responseTo===c&&m++,o===a.length&&u(m),t.responseTo===c&&r.a.createElement(n.Fragment,{key:o},r.a.createElement("div",{className:"comment_container"},r.a.createElement(re,{updateComment:l,comment:t,videoId:i}),r.a.createElement(e,{commentList:a,videoId:i,updateComment:l,parentId:t._id})))}));return r.a.createElement("div",{className:"reply_comment_container"},m>0&&r.a.createElement("p",{onClick:function(){v(!f)}},"View ",m," Comment(s)"),f&&E)};var ie=function(e){var t=Object(h.c)((function(e){return e.user})).userData,a=e.videoId,c=e.commentList,i=e.updateComment,l=Object(n.useState)([]),o=Object(_.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(_.a)(u,2),v=p[0],E=p[1],b=function(e){m(e.target.value)},g=function(e){e.preventDefault();var n={videoId:a,writer:t._id,content:s};d.a.post("".concat(f,"/comment/saveComment"),n).then((function(e){if(e.data.success){var t=e.data.commentInfo;i(t),m(""),E(!1)}else alert("\ub313\uae00 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))},w=c&&c.map((function(e,t){return!e.responseTo&&r.a.createElement(n.Fragment,{key:t},r.a.createElement(re,{updateComment:i,comment:e,videoId:a}),r.a.createElement(ce,{commentList:c,videoId:a,updateComment:i,parentId:e._id}))})),y=function(){E(!v)};return r.a.createElement("div",null,r.a.createElement("p",null,"\ub313\uae00"),r.a.createElement("hr",null),t&&function(){if(t._id){t._id;return r.a.createElement("form",{onSubmit:g,className:"root_comment_form"},r.a.createElement("textarea",{className:"root_comment_textarea",value:s,onChange:b,onClick:y,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"}),v&&r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{className:"cancel_btn",onClick:y},"\ucde8\uc18c"),r.a.createElement("button",null,"\ub313\uae00")))}return r.a.createElement("form",{onSubmit:g,className:"root_comment_form"},r.a.createElement("textarea",{className:"root_comment_textarea",value:s,onChange:b,onClick:y,placeholder:"\ub85c\uadf8\uc778 \ud6c4 \ub313\uae00 \ub4f1\ub85d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."}))}(),w)};var le=function(e){var t=e.match.params.videoId,a=Object(n.useState)([]),c=Object(_.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)({}),s=Object(_.a)(o,2),m=s[0],u=s[1],p=localStorage.getItem("userId");return Object(n.useEffect)((function(){var e={videoId:t};d.a.post("".concat(f,"/video/getVideoDetail"),e).then((function(e){e.data.success?u(e.data.videoInfo):alert("\ube44\ub514\uc624 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),d.a.post("".concat(f,"/comment/getComments"),e).then((function(e){if(e.data.success){var t=e.data.commentList;l(Object(G.a)(t))}else alert("\ub313\uae00 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]),r.a.createElement("div",{className:"videoDetail_container"},r.a.createElement(y.a,{gutter:[16,16]},r.a.createElement(w.a,{lg:18,xs:24},m.writer?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"video_container"},r.a.createElement("video",{src:"".concat(f,"/").concat(m.filePath),controls:!0})),r.a.createElement("div",{className:"video_info_container"},r.a.createElement("span",{className:"video_info_writer_thumbnail"},r.a.createElement("img",{src:m.writer.image})),r.a.createElement("div",{className:"video_info"},r.a.createElement("h3",null,m.writer.name),r.a.createElement("span",null,m.description)),r.a.createElement("div",{className:"userAction_container"},p&&r.a.createElement(ne,{video:!0,videoId:t,userId:p}),p&&p!==m.writer._id&&r.a.createElement(Q,{userTo:m.writer._id,userFrom:localStorage.getItem("userId")})),p===m.writer._id&&r.a.createElement("button",{className:"delete_video_btn",onClick:function(){return function(a){var n={writerId:a,videoId:t};d.a.post("".concat(f,"/video/deleteVideo"),n).then((function(t){t.data.success?e.history.push("/"):alert("\ube44\ub514\uc624 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}(p)}},"Delete Video"))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"...Loading")),r.a.createElement(ie,{updateComment:function(e){if(e.length)return l(Object(G.a)(e));l([].concat(Object(G.a)(i),[e]))},commentList:i,videoId:t})),r.a.createElement(w.a,{lg:6,xs:24},r.a.createElement(K,null))))};var oe=function(){var e=Object(n.useState)([]),t=Object(_.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){var e={userFrom:localStorage.getItem("userId")};d.a.post("".concat(f,"/subscribe/getSubscribeVideo"),e).then((function(e){if(e.data.success){var t=e.data.subscribedVideo;c(t)}else alert("\uad6c\ub3c5\ud558\ub294 \ube44\ub514\uc624 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}))}),[]);var i=a&&a.map((function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement(w.a,{lg:6,md:8,xs:24,key:t},r.a.createElement("div",{className:"landing_video_thumbnail"},r.a.createElement("a",{href:"/video/".concat(e._id)},r.a.createElement("img",{src:"".concat(f,"/").concat(e.thumbnail)}),r.a.createElement("span",{className:"landing_video_duration"},"".concat(a,":").concat(n)))),r.a.createElement("div",{className:"landing_video_info_container"},r.a.createElement("div",{className:"landing_video_writer_thumbnail"},r.a.createElement("img",{src:"".concat(e.writer.image)})),r.a.createElement("div",{className:"landing_video_info"},r.a.createElement("span",null,e.title),r.a.createElement("span",null,e.description),r.a.createElement("div",null,r.a.createElement("span",null,0!==e.views&&e.view>1?"".concat(e.views," views"):"".concat(e.views," view")),r.a.createElement("span",null," - ",O()(e.createdAt).format("MMM Do YY"))))))}));return r.a.createElement("div",{className:"landingPage_container"},r.a.createElement("h2",{className:"landingPage_title"},"Subscribe Videos"),r.a.createElement(y.a,{gutter:[16,16]},i))};var se=function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(U,null),r.a.createElement("div",{style:{paddingTop:"69px",minHeight:"calc(100vh - 80px)"}},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:g(j,null)}),r.a.createElement(l.a,{exact:!0,path:"/login",component:g(T,!1)}),r.a.createElement(l.a,{exact:!0,path:"/register",component:g(M,!1)}),r.a.createElement(l.a,{exact:!0,path:"/video/upload",component:g(J,!0)}),r.a.createElement(l.a,{exact:!0,path:"/video/:videoId",component:g(le,null)}),r.a.createElement(l.a,{exact:!0,path:"/subscribe",component:g(oe,!0)}))),r.a.createElement(H,null))},me=a(163),ue=a(118),de=a(172),pe=Object(ue.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(de.a)({},e,{register:t.payload});case"login_user":return Object(de.a)({},e,{loginSucces:t.payload});case"auth_user":return Object(de.a)({},e,{userData:t.payload});case"logout_user":return Object(de.a)({},e);default:return e}}}),fe=a(481),ve=a.n(fe),Ee=a(482),be=Object(ue.a)(ve.a,Ee.a)(ue.d);i.a.render(r.a.createElement(h.a,{store:be(pe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(me.a,null,r.a.createElement(se,null))),document.getElementById("root"))}},[[488,1,2]]]);
//# sourceMappingURL=main.585981fa.chunk.js.map